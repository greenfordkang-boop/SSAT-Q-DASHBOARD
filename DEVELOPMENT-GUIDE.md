# SSAT Q-Dashboard ê°œë°œ ê°€ì´ë“œ
## React + TypeScript + Supabase í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•

---

## ğŸ“š ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ ì„ ì •](#2-ê¸°ìˆ -ìŠ¤íƒ-ì„ ì •)
3. [ê°œë°œ í™˜ê²½ êµ¬ì¶•](#3-ê°œë°œ-í™˜ê²½-êµ¬ì¶•)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#4-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ](#5-í”„ë¡ íŠ¸ì—”ë“œ-ê°œë°œ)
6. [ë°±ì—”ë“œ ì—°ë™](#6-ë°±ì—”ë“œ-ì—°ë™)
7. [ë°°í¬ ë° ìš´ì˜](#7-ë°°í¬-ë°-ìš´ì˜)
8. [ë¬¸ì œ í•´ê²° ë° ë””ë²„ê¹…](#8-ë¬¸ì œ-í•´ê²°-ë°-ë””ë²„ê¹…)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©ì 
**SSAT Q-Dashboard**ëŠ” ì œì¡°ì—…ì²´ì˜ í’ˆì§ˆ ê´€ë¦¬ë¥¼ ìœ„í•œ ì¢…í•© ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.

### 1.2 ì£¼ìš” ê¸°ëŠ¥
- **NCR ê´€ë¦¬** - ë¶€ì í•© ë³´ê³ ì„œ ì¶”ì  ë° ê´€ë¦¬
- **ê³ ê° í’ˆì§ˆ ì§€í‘œ** - ê³ ê°ë³„ ì›”ê°„ í’ˆì§ˆ ì„±ê³¼ ëª¨ë‹ˆí„°ë§
- **í˜‘ë ¥ì—…ì²´ í’ˆì§ˆ ì§€í‘œ** - ìˆ˜ì…ê²€ì‚¬ ê²°ê³¼ ì¶”ì 
- **ì¶œí•˜ í’ˆì§ˆ ì§€í‘œ** - ì¶œí•˜ í’ˆì§ˆ ì„±ê³¼ ëª¨ë‹ˆí„°ë§
- **ì‹ ì† ëŒ€ì‘ ì¶”ì ** - ë¶ˆëŸ‰ ì‹ ì† ëŒ€ì‘ ê´€ë¦¬
- **ê³µì • í’ˆì§ˆ ëŒ€ì‹œë³´ë“œ** - Excel ë°ì´í„° ì—…ë¡œë“œ ë° ë¶„ì„

### 1.3 í”„ë¡œì íŠ¸ ì •ë³´
- **ë²„ì „**: 2.0.0
- **ì´ ì»¤ë°‹ ìˆ˜**: 91ê°œ
- **ê°œë°œ ê¸°ê°„**: ì•½ 2ì¼ (ì§‘ì¤‘ ê°œë°œ)
- **ì£¼ìš” ì»´í¬ë„ŒíŠ¸**: 10ê°œ

---

## 2. ê¸°ìˆ  ìŠ¤íƒ ì„ ì •

### 2.1 í”„ë¡ íŠ¸ì—”ë“œ

#### React 18.3.1
- **ì„ íƒ ì´ìœ **: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜, í’ë¶€í•œ ìƒíƒœê³„
- **ì¥ì **: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸, Virtual DOM ì„±ëŠ¥ ìµœì í™”

#### TypeScript 5.7.2
- **ì„ íƒ ì´ìœ **: íƒ€ì… ì•ˆì •ì„±, IDE ì§€ì› ê°•í™”
- **ì¥ì **: ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ê²€ì¶œ, ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

#### Vite 6.0.5
- **ì„ íƒ ì´ìœ **: ë¹ ë¥¸ ë¹Œë“œ ì†ë„, ê°œë°œ ì„œë²„ Hot Module Replacement
- **ì¥ì **: ES ëª¨ë“ˆ ê¸°ë°˜, ë²ˆë“¤ í¬ê¸° ìµœì í™”

#### Tailwind CSS 3.4.17
- **ì„ íƒ ì´ìœ **: ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS í”„ë ˆì„ì›Œí¬
- **ì¥ì **: ë¹ ë¥¸ ìŠ¤íƒ€ì¼ë§, ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ

### 2.2 ë°±ì—”ë“œ & ë°ì´í„°ë² ì´ìŠ¤

#### Supabase (PostgreSQL)
- **ì„ íƒ ì´ìœ **:
  - ì˜¤í”ˆì†ŒìŠ¤ Firebase ëŒ€ì•ˆ
  - PostgreSQL ê¸°ë°˜ (ê°•ë ¥í•œ ê´€ê³„í˜• DB)
  - ì‹¤ì‹œê°„ ê¸°ëŠ¥ ë‚´ì¥
  - RESTful API ìë™ ìƒì„±
- **ì¥ì **:
  - ë¬´ë£Œ í‹°ì–´ ì œê³µ
  - ë³„ë„ ì„œë²„ ë¶ˆí•„ìš”
  - Row Level Security (RLS) ì§€ì›

### 2.3 ë¼ì´ë¸ŒëŸ¬ë¦¬

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ | ìš©ë„ |
|----------|------|------|
| `@supabase/supabase-js` | 2.45.0 | Supabase í´ë¼ì´ì–¸íŠ¸ |
| `recharts` | 2.12.7 | ì°¨íŠ¸ ì‹œê°í™” |
| `xlsx` | 0.18.5 | Excel íŒŒì¼ ì²˜ë¦¬ |
| `jspdf` | 2.5.1 | PDF ìƒì„± |
| `html2canvas` | 1.4.1 | HTML to ì´ë¯¸ì§€ ë³€í™˜ |
| `@google/generative-ai` | 0.21.0 | AI ê¸°ëŠ¥ (Gemini) |

---

## 3. ê°œë°œ í™˜ê²½ êµ¬ì¶•

### 3.1 í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

```bash
# Viteë¡œ React + TypeScript í”„ë¡œì íŠ¸ ìƒì„±
npm create vite@latest ssat-q-dashboard -- --template react-ts

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd ssat-q-dashboard

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

### 3.2 í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# Supabase í´ë¼ì´ì–¸íŠ¸
npm install @supabase/supabase-js

# UI ë¼ì´ë¸ŒëŸ¬ë¦¬
npm install recharts xlsx jspdf html2canvas

# Tailwind CSS
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### 3.3 Tailwind CSS ì„¤ì •

**tailwind.config.js:**
```javascript
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

### 3.4 Vite ì„¤ì •

**vite.config.ts:**
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  build: {
    outDir: 'dist',
    minify: 'esbuild', // terser ëŒ€ì‹  esbuild ì‚¬ìš©
  }
})
```

### 3.5 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ssat-q-dashboard/
â”œâ”€â”€ components/              # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Dashboard.tsx        # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ NCRForm.tsx          # NCR ì…ë ¥ í¼
â”‚   â”œâ”€â”€ NCRTable.tsx         # NCR í…Œì´ë¸”
â”‚   â”œâ”€â”€ CustomerQuality.tsx  # ê³ ê° í’ˆì§ˆ
â”‚   â”œâ”€â”€ IncomingQuality.tsx  # ìˆ˜ì…ê²€ì‚¬
â”‚   â”œâ”€â”€ OutgoingQuality.tsx  # ì¶œí•˜í’ˆì§ˆ
â”‚   â”œâ”€â”€ QuickResponse.tsx    # ì‹ ì†ëŒ€ì‘
â”‚   â”œâ”€â”€ ProcessQuality.tsx   # ê³µì •í’ˆì§ˆ
â”‚   â””â”€â”€ DatabaseSetupScreen.tsx  # DB ì„¤ì • í™”ë©´
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabaseClient.ts    # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ dbMigration.ts       # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”œâ”€â”€ types.ts                 # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ App.tsx                  # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ index.tsx                # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”œâ”€â”€ supabase-schema.sql      # DB ìŠ¤í‚¤ë§ˆ
â””â”€â”€ package.json             # í”„ë¡œì íŠ¸ ì„¤ì •
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. **Supabase íšŒì›ê°€ì…**
   - https://supabase.com ì ‘ì†
   - GitHub ë˜ëŠ” ì´ë©”ì¼ë¡œ ê°€ì…

2. **ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±**
   - í”„ë¡œì íŠ¸ ì´ë¦„: `ssat-q-dashboard`
   - ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
   - ë¦¬ì „ ì„ íƒ (ê¶Œì¥: Northeast Asia - Seoul)

3. **í”„ë¡œì íŠ¸ ì •ë³´ í™•ì¸**
   - Project URL: `https://xxxxx.supabase.co`
   - API Keys â†’ `anon public` í‚¤ ë³µì‚¬

### 4.2 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

#### í…Œì´ë¸” êµ¬ì¡°

**1. NCR Entries (ncr_entries)**
```sql
CREATE TABLE ncr_entries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  month INTEGER NOT NULL,
  day INTEGER NOT NULL,
  source TEXT NOT NULL,
  customer TEXT NOT NULL,
  model TEXT NOT NULL,
  part_name TEXT NOT NULL,
  part_no TEXT NOT NULL,
  defect_content TEXT,
  outflow_cause TEXT,
  root_cause TEXT,
  countermeasure TEXT,
  plan_date TEXT,
  result_date TEXT,
  effectiveness_check TEXT,
  status TEXT NOT NULL DEFAULT 'Open',
  progress_rate INTEGER DEFAULT 0,
  remarks TEXT,
  attachments JSONB DEFAULT '[]'::jsonb,
  eight_d_data JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**2. Customer Metrics (customer_metrics)**
```sql
CREATE TABLE customer_metrics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  year INTEGER NOT NULL,
  customer TEXT NOT NULL,
  month INTEGER NOT NULL CHECK (month >= 1 AND month <= 12),
  target NUMERIC NOT NULL DEFAULT 10,
  inspection_qty INTEGER NOT NULL DEFAULT 0,
  defects INTEGER NOT NULL DEFAULT 0,
  actual NUMERIC NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  CONSTRAINT unique_customer_year_month UNIQUE (customer, year, month)
);
```

**3. Supplier Metrics (supplier_metrics)**
```sql
CREATE TABLE supplier_metrics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  year INTEGER NOT NULL,
  supplier TEXT NOT NULL,
  month INTEGER NOT NULL CHECK (month >= 1 AND month <= 12),
  target NUMERIC NOT NULL DEFAULT 7500,
  incoming_qty INTEGER NOT NULL DEFAULT 0,
  inspection_qty INTEGER NOT NULL DEFAULT 0,
  defects INTEGER NOT NULL DEFAULT 0,
  actual NUMERIC NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  CONSTRAINT unique_supplier_year_month UNIQUE (supplier, year, month)
);
```

**4. Outgoing Metrics (outgoing_metrics)**
```sql
CREATE TABLE outgoing_metrics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  year INTEGER NOT NULL,
  month INTEGER NOT NULL CHECK (month >= 1 AND month <= 12),
  target NUMERIC NOT NULL DEFAULT 10,
  inspection_qty INTEGER NOT NULL DEFAULT 0,
  defects INTEGER NOT NULL DEFAULT 0,
  actual NUMERIC NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  CONSTRAINT unique_outgoing_year_month UNIQUE (year, month)
);
```

**5. Quick Response Entries (quick_response_entries)**
```sql
CREATE TABLE quick_response_entries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  date DATE NOT NULL,
  department TEXT NOT NULL,
  machine_no TEXT,
  defect_count INTEGER NOT NULL DEFAULT 0,
  model TEXT NOT NULL,
  defect_type TEXT,
  process TEXT,
  defect_content TEXT,
  coating TEXT,
  area TEXT,
  material_code TEXT,
  shielding TEXT,
  action TEXT,
  material_manager TEXT,
  meeting_attendance TEXT,
  status_24h TEXT DEFAULT 'N/A',
  status_3d TEXT DEFAULT 'N/A',
  status_14day TEXT DEFAULT 'N/A',
  status_24d TEXT DEFAULT 'N/A',
  status_25d TEXT DEFAULT 'N/A',
  status_30d TEXT DEFAULT 'N/A',
  customer_mm TEXT,
  remarks TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**6. Process Quality Uploads (process_quality_uploads)**
```sql
CREATE TABLE process_quality_uploads (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  filename TEXT NOT NULL,
  record_count INTEGER NOT NULL DEFAULT 0,
  upload_date TIMESTAMPTZ DEFAULT NOW(),
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**7. Process Quality Data (process_quality_data)**
```sql
CREATE TABLE process_quality_data (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  upload_id UUID REFERENCES process_quality_uploads(id) ON DELETE CASCADE,
  customer TEXT NOT NULL,
  part_type TEXT NOT NULL,
  vehicle_model TEXT,
  product_name TEXT,
  production_qty INTEGER NOT NULL DEFAULT 0,
  defect_qty INTEGER NOT NULL DEFAULT 0,
  defect_amount NUMERIC NOT NULL DEFAULT 0,
  defect_rate NUMERIC NOT NULL DEFAULT 0,
  data_date DATE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 4.3 íŠ¸ë¦¬ê±° ë° ì¸ë±ìŠ¤

#### Updated_at ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°
```sql
-- íŠ¸ë¦¬ê±° í•¨ìˆ˜
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
   NEW.updated_at = NOW();
   RETURN NEW;
END;
$$ language 'plpgsql';

-- ê° í…Œì´ë¸”ì— íŠ¸ë¦¬ê±° ì ìš©
CREATE TRIGGER update_ncr_entries_updated_at
  BEFORE INSERT OR UPDATE ON ncr_entries
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- (ë‹¤ë¥¸ í…Œì´ë¸”ë“¤ë„ ë™ì¼í•˜ê²Œ ì ìš©)
```

#### ì¸ë±ìŠ¤ ìƒì„±
```sql
-- ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì¸ë±ìŠ¤
CREATE INDEX idx_ncr_customer ON ncr_entries(customer);
CREATE INDEX idx_ncr_status ON ncr_entries(status);
CREATE INDEX idx_ncr_created ON ncr_entries(created_at DESC);
CREATE INDEX idx_customer_metrics_year ON customer_metrics(year);
CREATE INDEX idx_pq_data_date ON process_quality_data(data_date DESC);
```

### 4.4 ìŠ¤í‚¤ë§ˆ ì ìš© ë°©ë²•

1. **Supabase Dashboard â†’ SQL Editor**
2. **New Query í´ë¦­**
3. **supabase-schema.sql ë‚´ìš© ë³µì‚¬ & ë¶™ì—¬ë„£ê¸°**
4. **Run ë²„íŠ¼ í´ë¦­ (Ctrl/Cmd + Enter)**
5. **Table Editorì—ì„œ í…Œì´ë¸” ìƒì„± í™•ì¸**

---

## 5. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ

### 5.1 íƒ€ì… ì •ì˜ (types.ts)

```typescript
// NCR Entry íƒ€ì…
export interface NCREntry {
  id: string;
  month: number;
  day: number;
  source: string;
  customer: string;
  model: string;
  part_name: string;
  part_no: string;
  defect_content?: string;
  status: 'Open' | 'In Progress' | 'Closed';
  progress_rate: number;
  created_at: string;
  updated_at: string;
}

// Customer Metric íƒ€ì…
export interface CustomerMetric {
  id: string;
  year: number;
  customer: string;
  month: number;
  target: number;
  inspection_qty: number;
  defects: number;
  actual: number;
}

// Process Quality Data íƒ€ì…
export interface ProcessQualityData {
  id: string;
  customer: string;
  part_type: string;
  vehicle_model?: string;
  product_name?: string;
  production_qty: number;
  defect_qty: number;
  defect_amount: number;
  defect_rate: number;
  data_date: string;
}
```

### 5.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

#### Dashboard.tsx (ë©”ì¸ ëŒ€ì‹œë³´ë“œ)
```typescript
import React, { useState } from 'react';
import NCRTable from './components/NCRTable';
import CustomerQuality from './components/CustomerQuality';
import IncomingQuality from './components/IncomingQuality';
// ... ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ import

export default function Dashboard() {
  const [activeTab, setActiveTab] = useState('dashboard');

  return (
    <div className="min-h-screen bg-gray-50">
      {/* ë„¤ë¹„ê²Œì´ì…˜ ë°” */}
      <nav className="bg-white shadow">
        <div className="flex space-x-4">
          <button onClick={() => setActiveTab('dashboard')}>
            ëŒ€ì‹œë³´ë“œ
          </button>
          <button onClick={() => setActiveTab('customer')}>
            ê³ ê° í’ˆì§ˆ
          </button>
          {/* ... ë‹¤ë¥¸ íƒ­ë“¤ */}
        </div>
      </nav>

      {/* ì½˜í…ì¸  ì˜ì—­ */}
      <main className="container mx-auto p-4">
        {activeTab === 'dashboard' && <NCRTable />}
        {activeTab === 'customer' && <CustomerQuality />}
        {/* ... ë‹¤ë¥¸ íƒ­ ì»´í¬ë„ŒíŠ¸ë“¤ */}
      </main>
    </div>
  );
}
```

#### CustomerQuality.tsx (ê³ ê° í’ˆì§ˆ ê´€ë¦¬)
```typescript
import React, { useState, useEffect } from 'react';
import { supabase } from '../lib/supabaseClient';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid } from 'recharts';

export default function CustomerQuality() {
  const [metrics, setMetrics] = useState<CustomerMetric[]>([]);
  const [year, setYear] = useState(new Date().getFullYear());

  useEffect(() => {
    loadMetrics();
  }, [year]);

  const loadMetrics = async () => {
    const { data, error } = await supabase
      .from('customer_metrics')
      .select('*')
      .eq('year', year)
      .order('month', { ascending: true });

    if (data) setMetrics(data);
  };

  return (
    <div className="space-y-4">
      {/* ì—°ë„ ì„ íƒ */}
      <select value={year} onChange={(e) => setYear(Number(e.target.value))}>
        <option value={2024}>2024</option>
        <option value={2025}>2025</option>
        <option value={2026}>2026</option>
      </select>

      {/* ì°¨íŠ¸ */}
      <BarChart width={800} height={400} data={metrics}>
        <CartesianGrid strokeDasharray="3 3" />
        <XAxis dataKey="month" />
        <YAxis />
        <Bar dataKey="actual" fill="#3b82f6" />
      </BarChart>

      {/* ë°ì´í„° ì…ë ¥ í¼ */}
      {/* ... */}
    </div>
  );
}
```

#### ProcessQuality.tsx (ê³µì • í’ˆì§ˆ - Excel ì—…ë¡œë“œ)
```typescript
import React, { useState } from 'react';
import * as XLSX from 'xlsx';
import { supabase } from '../lib/supabaseClient';

export default function ProcessQuality() {
  const [uploading, setUploading] = useState(false);

  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;

    setUploading(true);

    try {
      // 1. Excel íŒŒì¼ ì½ê¸°
      const data = await file.arrayBuffer();
      const workbook = XLSX.read(data);
      const worksheet = workbook.Sheets[workbook.SheetNames[0]];
      const jsonData = XLSX.utils.sheet_to_json(worksheet);

      // 2. ì—…ë¡œë“œ ê¸°ë¡ ìƒì„±
      const { data: uploadRecord, error: uploadError } = await supabase
        .from('process_quality_uploads')
        .insert({
          filename: file.name,
          record_count: jsonData.length
        })
        .select()
        .single();

      // 3. ë°ì´í„° ë³€í™˜ ë° ì €ì¥
      const processedData = jsonData.map((row: any) => ({
        upload_id: uploadRecord.id,
        customer: row['ê³ ê°ì‚¬'] || row['ê±°ë˜ì²˜'],
        part_type: row['ë¶€í’ˆìœ í˜•'] || row['ê³µì •'],
        production_qty: Number(row['ìƒì‚°ìˆ˜ëŸ‰'] || row['ìƒì‚°ëŸ‰']),
        defect_qty: Number(row['ë¶ˆëŸ‰ìˆ˜ëŸ‰'] || row['ë¶ˆëŸ‰ëŸ‰']),
        defect_amount: Number(row['ë¶ˆëŸ‰ê¸ˆì•¡'] || row['ê¸ˆì•¡']),
        defect_rate: (Number(row['ë¶ˆëŸ‰ìˆ˜ëŸ‰']) / Number(row['ìƒì‚°ìˆ˜ëŸ‰'])) * 100,
        data_date: row['ì¼ì'] || row['ë‚ ì§œ']
      }));

      const { error: dataError } = await supabase
        .from('process_quality_data')
        .insert(processedData);

      if (dataError) throw dataError;

      alert('ì—…ë¡œë“œ ì„±ê³µ!');
    } catch (error) {
      console.error('ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
      alert('ì—…ë¡œë“œ ì‹¤íŒ¨');
    } finally {
      setUploading(false);
    }
  };

  return (
    <div>
      <input
        type="file"
        accept=".xlsx,.xls"
        onChange={handleFileUpload}
        disabled={uploading}
      />
      {uploading && <p>ì—…ë¡œë“œ ì¤‘...</p>}
    </div>
  );
}
```

---

## 6. ë°±ì—”ë“œ ì—°ë™

### 6.1 Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

**lib/supabaseClient.ts:**
```typescript
import { createClient } from '@supabase/supabase-js';

// ê¸°ë³¸ê°’ ì„¤ì •
const DEFAULT_URL = 'https://xjjsqyawvojybuyrehrr.supabase.co';
const DEFAULT_KEY = 'sb_publishable_vvaBbJHvo0pcUwaUiPW0ww_vElHC7GW';

// ì €ì¥ì†Œ í‚¤ (v5 - ê¸°ì¡´ ìºì‹œ ë¬´íš¨í™”)
const STORAGE_KEY_URL = 'supabase_url_v5';
const STORAGE_KEY_KEY = 'supabase_key_v5';

export const getSupabase = () => {
  let url = DEFAULT_URL;
  let key = DEFAULT_KEY;

  // LocalStorageì—ì„œ ì‚¬ìš©ì ì •ì˜ ì„¤ì • ì½ê¸°
  if (typeof window !== 'undefined') {
    const storedUrl = localStorage.getItem(STORAGE_KEY_URL);
    const storedKey = localStorage.getItem(STORAGE_KEY_KEY);

    if (storedUrl && storedUrl.trim().startsWith('http')) {
      url = storedUrl.trim();
    }
    if (storedKey && storedKey.trim().length > 0) {
      key = storedKey.trim();
    }
  }

  try {
    return createClient(url, key);
  } catch (error) {
    console.error("Supabase ì´ˆê¸°í™” ì‹¤íŒ¨:", error);
    return createClient(DEFAULT_URL, DEFAULT_KEY);
  }
};

export const supabase = getSupabase();

// ì„¤ì • ì €ì¥ í•¨ìˆ˜
export const saveSupabaseConfig = (newUrl: string, newKey: string) => {
  const cleanUrl = newUrl.trim();
  const cleanKey = newKey.trim();

  if (!cleanUrl.startsWith('http')) {
    alert('ìœ íš¨í•˜ì§€ ì•Šì€ URLì…ë‹ˆë‹¤.');
    return;
  }

  localStorage.setItem(STORAGE_KEY_URL, cleanUrl);
  localStorage.setItem(STORAGE_KEY_KEY, cleanKey);

  // ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ì„¤ì • ì ìš©
  window.location.href = '/';
};

// ì„¤ì • ì´ˆê¸°í™” í•¨ìˆ˜
export const resetSupabaseConfig = () => {
  localStorage.removeItem(STORAGE_KEY_URL);
  localStorage.removeItem(STORAGE_KEY_KEY);
  window.location.href = '/';
};
```

### 6.2 CRUD ì‘ì—… ì˜ˆì œ

#### ë°ì´í„° ì¡°íšŒ (Read)
```typescript
// ì „ì²´ ì¡°íšŒ
const { data, error } = await supabase
  .from('ncr_entries')
  .select('*')
  .order('created_at', { ascending: false });

// í•„í„° ì¡°íšŒ
const { data } = await supabase
  .from('customer_metrics')
  .select('*')
  .eq('year', 2025)
  .gte('month', 1)
  .lte('month', 12);
```

#### ë°ì´í„° ìƒì„± (Create)
```typescript
const { data, error } = await supabase
  .from('ncr_entries')
  .insert({
    month: 1,
    day: 15,
    customer: 'Samsung',
    model: 'Model-X',
    part_name: 'Engine Part',
    part_no: 'EP-001',
    status: 'Open',
    progress_rate: 0
  })
  .select()
  .single();
```

#### ë°ì´í„° ìˆ˜ì • (Update)
```typescript
const { error } = await supabase
  .from('ncr_entries')
  .update({
    status: 'Closed',
    progress_rate: 100
  })
  .eq('id', entryId);
```

#### ë°ì´í„° ì‚­ì œ (Delete)
```typescript
const { error } = await supabase
  .from('ncr_entries')
  .delete()
  .eq('id', entryId);
```

#### Upsert (ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸, ì—†ìœ¼ë©´ ìƒì„±)
```typescript
const { error } = await supabase
  .from('customer_metrics')
  .upsert({
    customer: 'Samsung',
    year: 2025,
    month: 1,
    target: 10,
    inspection_qty: 1000,
    defects: 5,
    actual: 5
  }, {
    onConflict: 'customer,year,month' // UNIQUE ì œì•½ì¡°ê±´ ì»¬ëŸ¼
  });
```

---

## 7. ë°°í¬ ë° ìš´ì˜

### 7.1 Vercel ë°°í¬

#### ë‹¨ê³„ 1: GitHub ì €ì¥ì†Œ ì—°ê²°
```bash
# Git ì´ˆê¸°í™”
git init
git add .
git commit -m "Initial commit"

# GitHub ì €ì¥ì†Œ ìƒì„± í›„ í‘¸ì‹œ
git remote add origin https://github.com/username/ssat-q-dashboard.git
git branch -M main
git push -u origin main
```

#### ë‹¨ê³„ 2: Vercel ë°°í¬
1. **Vercel íšŒì›ê°€ì…** (https://vercel.com)
2. **Import Git Repository**
3. **í”„ë¡œì íŠ¸ ì„ íƒ**: ssat-q-dashboard
4. **Build ì„¤ì •**:
   - Framework Preset: Vite
   - Build Command: `npm run build`
   - Output Directory: `dist`
5. **í™˜ê²½ ë³€ìˆ˜** (ì„ íƒì‚¬í•­):
   - ê¸°ë³¸ ì„¤ì •ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë¶ˆí•„ìš”
6. **Deploy í´ë¦­**

#### ë‹¨ê³„ 3: ë°°í¬ í™•ì¸
- ë°°í¬ URL: `https://ssat-q-dashboard.vercel.app`
- ìë™ ë°°í¬: main ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ë•Œë§ˆë‹¤ ìë™ ë°°í¬

### 7.2 í™˜ê²½ ì„¤ì •

#### Production vs Development
```typescript
// lib/supabaseClient.ts
const isProduction = import.meta.env.PROD;

const DEFAULT_URL = isProduction
  ? 'https://production.supabase.co'
  : 'https://dev.supabase.co';
```

#### í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
# .env.local (Gitì— ì»¤ë°‹í•˜ì§€ ì•ŠìŒ)
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

```typescript
// ì‚¬ìš©ë²•
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;
```

### 7.3 ì„±ëŠ¥ ìµœì í™”

#### ë¹Œë“œ ìµœì í™”
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    minify: 'esbuild', // terserë³´ë‹¤ ë¹ ë¦„
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom'],
          'chart-vendor': ['recharts'],
          'supabase-vendor': ['@supabase/supabase-js']
        }
      }
    }
  }
});
```

#### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
```typescript
// ì§€ì—° ë¡œë”©
const ProcessQuality = React.lazy(() => import('./components/ProcessQuality'));

// ì‚¬ìš©
<Suspense fallback={<Loading />}>
  <ProcessQuality />
</Suspense>
```

---

## 8. ë¬¸ì œ í•´ê²° ë° ë””ë²„ê¹…

### 8.1 ì£¼ìš” ë¬¸ì œ ë° í•´ê²°

#### ë¬¸ì œ 1: "updated_at ì»¬ëŸ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
**ì¦ìƒ:**
```
record 'new' has no field 'updated_at'
Could not find the 'updated_at' column
```

**ì›ì¸:**
- ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±°ê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•ŠìŒ
- í…Œì´ë¸”ì— `updated_at` ì»¬ëŸ¼ì´ ì—†ìŒ

**í•´ê²°ì±…:**
```sql
-- 1. ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE customer_metrics
ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ DEFAULT NOW();

-- 2. íŠ¸ë¦¬ê±° ì¬ìƒì„±
DROP TRIGGER IF EXISTS update_customer_metrics_updated_at
ON customer_metrics;

CREATE TRIGGER update_customer_metrics_updated_at
  BEFORE INSERT OR UPDATE ON customer_metrics
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

**í•´ê²° ê³¼ì •:**
1. `verify-triggers.html` íŒŒì¼ ìƒì„± (íŠ¸ë¦¬ê±° ê²€ì¦ ë„êµ¬)
2. `fix-updated-at-triggers.sql` ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
3. Supabase SQL Editorì—ì„œ ì‹¤í–‰
4. ë¬¸ì œ í•´ê²° í™•ì¸

#### ë¬¸ì œ 2: Excel ì—…ë¡œë“œ ì‹œ NaN ê°’ ì²˜ë¦¬
**ì¦ìƒ:**
```
NULL value in column violates not-null constraint
```

**ì›ì¸:**
- Excel ë¹ˆ ì…€ì´ NaNìœ¼ë¡œ ë³€í™˜ë¨
- NOT NULL ì œì•½ì¡°ê±´ ìœ„ë°˜

**í•´ê²°ì±…:**
```typescript
const processedData = jsonData.map((row: any) => ({
  production_qty: Number(row['ìƒì‚°ìˆ˜ëŸ‰']) || 0, // ê¸°ë³¸ê°’ 0
  defect_qty: Number(row['ë¶ˆëŸ‰ìˆ˜ëŸ‰']) || 0,
  defect_amount: Number(row['ë¶ˆëŸ‰ê¸ˆì•¡']) || 0,
  defect_rate: isNaN(defectRate) ? 0 : defectRate
}));
```

#### ë¬¸ì œ 3: Terser ë¹Œë“œ ì‹¤íŒ¨
**ì¦ìƒ:**
```
Error: Build failed due to minify error
```

**ì›ì¸:**
- Terser ë©”ëª¨ë¦¬ ë¶€ì¡±
- ë³µì¡í•œ ì½”ë“œ minify ì‹¤íŒ¨

**í•´ê²°ì±…:**
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    minify: 'esbuild' // terser â†’ esbuildë¡œ ë³€ê²½
  }
});
```

#### ë¬¸ì œ 4: ì¤‘ë³µ ë°ì´í„° ì €ì¥
**ì¦ìƒ:**
- ê°™ì€ ê³ ê°/ë…„ë„/ì›” ë°ì´í„°ê°€ ì¤‘ë³µ ì €ì¥ë¨

**ì›ì¸:**
- UNIQUE ì œì•½ì¡°ê±´ ì—†ìŒ

**í•´ê²°ì±…:**
```sql
-- UNIQUE ì œì•½ì¡°ê±´ ì¶”ê°€
ALTER TABLE customer_metrics
ADD CONSTRAINT unique_customer_year_month
UNIQUE (customer, year, month);

-- Upsert ì‚¬ìš©
await supabase
  .from('customer_metrics')
  .upsert(data, {
    onConflict: 'customer,year,month'
  });
```

### 8.2 ë””ë²„ê¹… ë„êµ¬

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦ ë„êµ¬ (verify-database.html)
```html
<!DOCTYPE html>
<html>
<head>
  <title>Database Verification</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>Database Table Verification</h1>
  <input id="url" placeholder="Supabase URL" />
  <input id="key" placeholder="API Key" />
  <button onclick="verifyTables()">Verify Tables</button>
  <div id="result"></div>

  <script>
    async function verifyTables() {
      const url = document.getElementById('url').value;
      const key = document.getElementById('key').value;
      const supabase = window.supabase.createClient(url, key);

      const tables = [
        'ncr_entries',
        'customer_metrics',
        'supplier_metrics',
        'outgoing_metrics',
        'quick_response_entries',
        'process_quality_uploads',
        'process_quality_data'
      ];

      let html = '<h2>Results:</h2>';
      for (const table of tables) {
        const { data, error } = await supabase
          .from(table)
          .select('count', { count: 'exact', head: true });

        if (error) {
          html += `<p>âŒ ${table}: ${error.message}</p>`;
        } else {
          html += `<p>âœ… ${table}: EXISTS</p>`;
        }
      }

      document.getElementById('result').innerHTML = html;
    }
  </script>
</body>
</html>
```

#### 2. íŠ¸ë¦¬ê±° ê²€ì¦ ë„êµ¬ (verify-triggers.html)
```html
<!-- íŠ¸ë¦¬ê±° ì¡´ì¬ ì—¬ë¶€ í™•ì¸ -->
<script>
async function checkTriggers() {
  const { data, error } = await supabase
    .rpc('get_triggers'); // Custom function í•„ìš”

  if (data) {
    console.log('Triggers:', data);
  }
}
</script>
```

#### 3. ë¸Œë¼ìš°ì € ì½˜ì†” ë””ë²„ê¹…
```typescript
// ë””ë²„ê·¸ ëª¨ë“œ
const DEBUG = true;

const loadData = async () => {
  if (DEBUG) console.log('Loading data...');

  const { data, error } = await supabase
    .from('ncr_entries')
    .select('*');

  if (DEBUG) {
    console.log('Data:', data);
    console.log('Error:', error);
  }
};
```

### 8.3 ê°œë°œ ê³¼ì • ì£¼ìš” ì»¤ë°‹

```
e37fb75 - fix: Add comprehensive solution for customer_metrics updated_at column error
5f181d0 - fix: Resolve customer quality input saving issue
0941a79 - fix: Add tools and documentation to fix updated_at trigger errors
1080fa7 - style: Update dashboard to Apple-style minimalist design
15aaef2 - feat: Add automatic database setup screen with table detection
9491ab1 - feat: Integrate process quality dashboard with Excel upload
a7cd0df - fix: Change minify from terser to esbuild to fix build failures
0188a5f - docs: Add comprehensive database setup guide and verification tool
```

---

## 9. ì¶”ê°€ í•™ìŠµ ìë£Œ

### 9.1 ê³µì‹ ë¬¸ì„œ
- **React**: https://react.dev
- **TypeScript**: https://www.typescriptlang.org
- **Vite**: https://vitejs.dev
- **Tailwind CSS**: https://tailwindcss.com
- **Supabase**: https://supabase.com/docs
- **Recharts**: https://recharts.org

### 9.2 ì¶”ì²œ í•™ìŠµ ê²½ë¡œ
1. **JavaScript/TypeScript ê¸°ì´ˆ**
2. **React Hooks (useState, useEffect)**
3. **Supabase CRUD ì‘ì—…**
4. **Tailwind CSS ìœ í‹¸ë¦¬í‹°**
5. **Excel íŒŒì¼ ì²˜ë¦¬ (XLSX)**
6. **ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Recharts)**

### 9.3 ë‹¤ìŒ ë‹¨ê³„
- [ ] ì‚¬ìš©ì ì¸ì¦ ì¶”ê°€ (Supabase Auth)
- [ ] Row Level Security (RLS) í™œì„±í™”
- [ ] ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (Supabase Realtime)
- [ ] ì´ë©”ì¼ ì•Œë¦¼ (Supabase Edge Functions)
- [ ] ë‹¤êµ­ì–´ ì§€ì› (i18n)
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ê°œì„ 
- [ ] PWA (Progressive Web App) êµ¬í˜„

---

## 10. ê²°ë¡ 

ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ë‹¤ìŒì„ í•™ìŠµí–ˆìŠµë‹ˆë‹¤:

âœ… **í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ**
- React + TypeScript í”„ë¡ íŠ¸ì—”ë“œ
- Supabase ë°±ì—”ë“œ
- PostgreSQL ë°ì´í„°ë² ì´ìŠ¤

âœ… **ì‹¤ì „ ë¬¸ì œ í•´ê²°**
- ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë¦¬ê±° ë¬¸ì œ
- Excel íŒŒì¼ ì²˜ë¦¬
- ë¹Œë“œ ìµœì í™”
- ë°°í¬ ë° ìš´ì˜

âœ… **ëª¨ë˜ ê°œë°œ ë„êµ¬**
- Vite (ë¹ ë¥¸ ë¹Œë“œ)
- Tailwind CSS (ìœ í‹¸ë¦¬í‹° CSS)
- Vercel (ìë™ ë°°í¬)

**í”„ë¡œì íŠ¸ í†µê³„:**
- ì´ ì»¤ë°‹: 91ê°œ
- ê°œë°œ ê¸°ê°„: 2ì¼
- ì»´í¬ë„ŒíŠ¸: 10ê°œ
- ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”: 7ê°œ

---

## ë¶€ë¡

### A. ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ë¯¸ë¦¬ë³´ê¸°
npm run preview

# Git ì»¤ë°‹
git add .
git commit -m "feat: Add new feature"
git push origin main

# ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
npm update

# ìºì‹œ ì‚­ì œ
npm cache clean --force
```

### B. ìœ ìš©í•œ VSCode í™•ì¥

- **ES7+ React/Redux/React-Native snippets**
- **Tailwind CSS IntelliSense**
- **Prettier - Code formatter**
- **ESLint**
- **GitLens**
- **Thunder Client** (API í…ŒìŠ¤íŠ¸)

### C. í”„ë¡œì íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ê°œë°œ ì‹œì‘ ì „
- [ ] Node.js ì„¤ì¹˜ (v16+)
- [ ] Git ì„¤ì¹˜
- [ ] VSCode ì„¤ì¹˜
- [ ] Supabase ê³„ì • ìƒì„±

#### ê°œë°œ ì¤‘
- [ ] íƒ€ì… ì •ì˜ ì‘ì„±
- [ ] ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- [ ] ì—ëŸ¬ í•¸ë“¤ë§
- [ ] ë¡œë”© ìƒíƒœ ì²˜ë¦¬
- [ ] Git ì»¤ë°‹ ê·œì¹™ ì¤€ìˆ˜

#### ë°°í¬ ì „
- [ ] ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [ ] í™˜ê²½ ë³€ìˆ˜ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì ìš©
- [ ] CORS ì„¤ì • í™•ì¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

---

**ë¬¸ì„œ ì‘ì„±ì¼**: 2026ë…„ 1ì›” 19ì¼
**ë²„ì „**: 2.0.0
**ì‘ì„±ì**: SSAT Q-Dashboard Team

---

ì´ ë¬¸ì„œëŠ” êµìœ¡ìš©ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
ì‹¤ì œ í”„ë¡œì íŠ¸ì— ë§ê²Œ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
